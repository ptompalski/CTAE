% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_merch_criteria.R
\name{get_merch_criteria}
\alias{get_merch_criteria}
\title{Get merchantability criteria for a jurisdiction/species (BEC-aware for BC)}
\usage{
get_merch_criteria(
  jurisdiction,
  species = NA_character_,
  BEC_zone = NA_character_,
  verbose = TRUE
)
}
\arguments{
\item{jurisdiction}{Province/Territory code (e.g., `"BC"`, `"AB"`).}

\item{species}{Species code. Optional for `"BC"`; if missing, falls back to `"ALL"` with a warning.}

\item{BEC_zone}{Optional BEC zone code (e.g., `"CWH"`, `"ICH"`). If missing for `"BC"`,
conservative criteria are taken from `BEC_group == "UNKNOWN"`.}

\item{verbose}{If TRUE, warns when BC falls back to genus-level, UNKNOWN BEC, or ALL.}
}
\value{
A one-row tibble with columns:
  `jurisdiction`, `species`, `stumpht_m`, `topdbh_cm`, `mindbh_cm`.
}
\description{
Convenience helper to fetch CBM-style merchantability criteria (stump height,
top diameter, and minimum DBH) from the internal `merchcrit` lookup table.
}
\details{
Before lookup, inputs are standardized using internal helpers:
* `standardize_jurisdiction_code()` for `jurisdiction`
* `standardize_species_code()` for `species` (keeps `"ALL"` as-is)

Rules:
* For British Columbia (`"BC"`), `species` is OPTIONAL:
  - If `species` is missing, the function falls back to `Species == "ALL"` and warns.
  - If `BEC_zone` is provided and can be mapped, criteria are looked up using
    (Province + Species + BEC_group).
  - If `BEC_zone` is missing/unknown, criteria fall back to a conservative BC
    BEC-independent layer using `BEC_group == "UNKNOWN"` (species-specific if present,
    otherwise `Species == "ALL"`).
  - If no exact species match is found, the function falls back to genus-level rules
    (e.g., `PICE.GLA` -> `PICE.SPP`) and then to `Species == "ALL"`.
* For other jurisdictions, criteria are jurisdiction-level (Province) only and
  species/BEC are ignored.

Stump height is returned in metres (converted from centimetres).
}
\examples{
get_merch_criteria("ON")
get_merch_criteria("PEI")                        # standardized to "PE"
get_merch_criteria("BC", "PSEU.MEN", "CWH")       # BEC-aware
get_merch_criteria("BC", "PICE.GLA", "CWH")       # genus fallback to PICE.SPP if present
get_merch_criteria("BC")                          # falls back to BC ALL + UNKNOWN (warns)

}
