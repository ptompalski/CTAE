% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/boudewyn.R
\name{v2b_biomass_components}
\alias{v2b_biomass_components}
\title{Convert merchantable volume to total aboveground biomass and components (Boudewyn et al. 2007)}
\usage{
v2b_biomass_components(
  vol_merchantable,
  species,
  jurisdiction,
  ecozone,
  offset = 5,
  renormalize = TRUE,
  clamp_x = FALSE
)
}
\arguments{
\item{vol_merchantable}{Numeric vector. Gross merchantable volume per hectare.}

\item{species}{Character vector. NFI species codes (e.g., "PICE.MAR").}

\item{jurisdiction}{Character vector. Jurisdiction code (e.g., "AB").}

\item{ecozone}{Numeric vector. Ecozone code (1--15).}

\item{renormalize}{Logical. If TRUE, renormalize capped proportions to sum to 1.}

\item{clamp_x}{Logical. If TRUE, clamp \code{vol_merchantable} to the calibration range
\code{[x_min, x_max]} from Table 7 before evaluating the proportion equations.}
}
\value{
A tibble with one row per input and computed columns only:
\describe{
  \item{b_total}{Total aboveground tree biomass (t/ha).}
  \item{b_bark}{Bark biomass (t/ha).}
  \item{b_branches}{Branch biomass (t/ha).}
  \item{b_foliage}{Foliage biomass (t/ha).}
  \item{p_sw}{Proportion of total biomass in stem wood.}
  \item{p_sb}{Proportion of total biomass in bark.}
  \item{p_br}{Proportion of total biomass in branches.}
  \item{p_fl}{Proportion of total biomass in foliage.}
  \item{b_stem_total}{Total stem wood biomass used to back-calculate \code{b_total} (t/ha).}
  \item{volume_used}{Only returned when \code{clamp_x = TRUE}; the volume actually used in Table 6.}
}
}
\description{
Computes total aboveground biomass (AGB) and biomass components (bark, branches, foliage)
from gross merchantable volume per hectare, using the Boudewyn et al. (2007)
model-based volume-to-biomass conversion framework (Tables 3--7), with updated
NFI parameters.
}
\details{
This function uses the volume-based proportion models (Appendix 2 Table 6)
and caps (Appendix 2 Table 7). Proportion caps are applied after evaluating the
Table 6 equations and (optionally) renormalized to sum to 1.


Extrapolation vs clamping.
The Table 7 columns \code{x_min} and \code{x_max} describe the approximate range of the
independent variable used to calibrate the proportion models. By default (\code{clamp_x = FALSE}),
the function uses the input \code{vol_merchantable} directly. If \code{vol_merchantable} falls outside the calibration
range, the result is an extrapolation; however, proportion caps (Table 7) are still applied to
prevent unrealistic proportions.

Setting \code{clamp_x = TRUE} replaces \code{vol_merchantable} with \code{min(max(vol_merchantable, x_min), x_max)}
before computing proportions. This can substantially change results for high-volume stands and
may lead to systematic underestimation of total biomass where \code{vol_merchantable > x_max}.
For this reason, clamping is disabled by default and is intended mainly for sensitivity analyses
and debugging.
}
